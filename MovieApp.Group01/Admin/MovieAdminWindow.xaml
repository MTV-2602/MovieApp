<Window
    x:Class="MovieApp.Group01.MovieAdminWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:MovieApp.Group01"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Movie Management - Admin Dashboard"
    Width="1400"
    Height="800"
    Background="White"
    ResizeMode="CanResize"
    WindowStartupLocation="CenterScreen"
    Loaded="Window_Loaded"
    mc:Ignorable="d">
    <Window.Resources>

        <!-- 🎨 PALETTE -->
        <SolidColorBrush x:Key="PrimaryBrush" Color="#8B3C46" />
        <SolidColorBrush x:Key="SecondaryBrush" Color="#EC9FAB" />
        <SolidColorBrush x:Key="PrimaryTextBrush" Color="#370808" />
        <SolidColorBrush x:Key="SidebarBrush" Color="#F3D4D0" />
        <SolidColorBrush x:Key="CardBorderBrush" Color="#EC9FAB" />

        <!-- Sidebar button -->
        <Style x:Key="NavMenuButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="Padding" Value="20,15" />
            <Setter Property="Foreground" Value="#8B3C46" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                            x:Name="border"
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            CornerRadius="12">
                            <ContentPresenter />
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#EC9FAB" />
                                <Setter Property="Foreground" Value="#370808" />
                            </Trigger>
                        </ControlTemplate.Triggers>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Selected -->
        <Style
            x:Key="NavMenuButtonSelected"
            BasedOn="{StaticResource NavMenuButton}"
            TargetType="Button">
            <Setter Property="Background" Value="#D97E8A" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontWeight" Value="SemiBold" />
        </Style>

        <!-- Action Button Style -->
        <Style x:Key="ActionButton" TargetType="Button">
            <Setter Property="Padding" Value="15,8" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.05" ScaleY="1.05" />
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DataGrid Style -->
        <Style x:Key="AdminDataGrid" TargetType="DataGrid">
            <Setter Property="Background" Value="White" />
            <Setter Property="BorderBrush" Value="#EC9FAB" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="RowBackground" Value="White" />
            <Setter Property="AlternatingRowBackground" Value="#FDEFF1" />
            <Setter Property="GridLinesVisibility" Value="Horizontal" />
            <Setter Property="HorizontalGridLinesBrush" Value="#EC9FAB" />
            <Setter Property="VerticalGridLinesBrush" Value="Transparent" />
            <Setter Property="HeadersVisibility" Value="Column" />
            <Setter Property="SelectionMode" Value="Single" />
            <Setter Property="SelectionUnit" Value="FullRow" />
            <Setter Property="CanUserAddRows" Value="False" />
            <Setter Property="CanUserDeleteRows" Value="False" />
            <Setter Property="AutoGenerateColumns" Value="False" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="RowHeight" Value="40" />
        </Style>

    </Window.Resources>

    <!-- ROOT -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <!-- ⭐ SIDEBAR -->
        <Border
            Grid.Column="0"
            Margin="-20,0,0,0"
            Background="#E7C0BC"
            BorderBrush="#EC9FAB"
            BorderThickness="0,0,2,0"
            CornerRadius="20">

            <StackPanel Margin="40,40,20,40">

                <TextBlock
                    Margin="0,0,0,40"
                    FontSize="30"
                    FontWeight="Bold"
                    Foreground="#8B3C46"
                    Text="Admin Dashboard" />

                <TextBlock
                    Margin="0,0,0,15"
                    FontSize="18"
                    FontWeight="Bold"
                    Foreground="#8B3C46"
                    Text="Menu" />

                <!-- DASHBOARD -->
                <Button Style="{StaticResource NavMenuButtonSelected}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,12,0"
                            FontSize="20"
                            Text="🎬" />
                        <TextBlock Text="Movie Management" />
                    </StackPanel>
                </Button>

                <Button Click="UserManagementButton_Click" Style="{StaticResource NavMenuButton}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,12,0"
                            FontSize="20"
                            Text="👥" />
                        <TextBlock Text="User Management" />
                    </StackPanel>
                </Button>

                <Border
                    Height="1"
                    Margin="0,20,0,20"
                    Background="#EC9FAB" />

                <Button Click="LogoutButton_Click" Style="{StaticResource NavMenuButton}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,12,0"
                            FontSize="20"
                            Text="🚪" />
                        <TextBlock Text="Logout" />
                    </StackPanel>
                </Button>

            </StackPanel>
        </Border>

        <!-- ⭐ MAIN CONTENT -->
        <ScrollViewer Grid.Column="1" Padding="0,0,20,0">
            <StackPanel Margin="40,30">

                <!-- HEADER -->
                <Grid Margin="0,0,0,30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- Title -->
                    <TextBlock
                        FontSize="36"
                        FontWeight="Bold"
                        Foreground="#8B3C46"
                        Text="Movie Management" />

                    <!-- SEARCH -->
                    <Border
                        Grid.Column="1"
                        Margin="20,0,0,0"
                        Padding="30,9"
                        Background="White"
                        BorderBrush="#EC9FAB"
                        BorderThickness="2"
                        CornerRadius="25">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock
                                Margin="0,0,10,0"
                                FontSize="18"
                                Foreground="#8B3C46"
                                Text="🔍" />
                            <TextBox
                                x:Name="SearchBox"
                                Width="300"
                                Background="Transparent"
                                BorderThickness="0"
                                FontSize="14"
                                Foreground="#8B3C46"
                                TextChanged="SearchBox_TextChanged" />
                        </StackPanel>
                    </Border>

                </Grid>

                <!-- ACTION BUTTONS -->
                <StackPanel
                    Margin="0,0,0,20"
                    Orientation="Horizontal">
                    <Button
                        x:Name="AddButton"
                        Click="AddButton_Click"
                        Style="{StaticResource ActionButton}"
                        Background="#4CAF50"
                        Content="➕ Add Movie"
                        Margin="0,0,10,0" />
                    <Button
                        x:Name="EditButton"
                        Click="EditButton_Click"
                        Style="{StaticResource ActionButton}"
                        Background="#2196F3"
                        Content="✏️ Edit"
                        Margin="0,0,10,0" />
                    <Button
                        x:Name="DeleteButton"
                        Click="DeleteButton_Click"
                        Style="{StaticResource ActionButton}"
                        Background="#F44336"
                        Content="❌ Delete"
                        Margin="0,0,10,0" />
                    <Button
                        x:Name="RefreshButton"
                        Click="RefreshButton_Click"
                        Style="{StaticResource ActionButton}"
                        Background="#FF9800"
                        Content="🔄 Refresh"
                        Margin="0,0,10,0" />
                </StackPanel>

                <!-- DATA GRID -->
                <DataGrid
                    x:Name="MoviesDataGrid"
                    Style="{StaticResource AdminDataGrid}"
                    SelectionChanged="MoviesDataGrid_SelectionChanged">
                    <DataGrid.Columns>
                        <DataGridTextColumn
                            Binding="{Binding MovieId}"
                            Header="ID"
                            Width="60" />
                        <DataGridTextColumn
                            Binding="{Binding Title}"
                            Header="Title"
                            Width="*" />
                        <DataGridTextColumn
                            Binding="{Binding Genre}"
                            Header="Genre"
                            Width="120" />
                        <DataGridTextColumn
                            Binding="{Binding Director.DirectorName, TargetNullValue='N/A'}"
                            Header="Director"
                            Width="150" />
                        <DataGridTextColumn
                            Binding="{Binding ReleaseDate, StringFormat='{}{0:yyyy-MM-dd}'}"
                            Header="Release Date"
                            Width="120" />
                        <DataGridTextColumn
                            Binding="{Binding Duration, StringFormat='{}{0} min'}"
                            Header="Duration"
                            Width="100" />
                        <DataGridTextColumn
                            Binding="{Binding Status}"
                            Header="Status"
                            Width="100" />
                    </DataGrid.Columns>
                </DataGrid>

            </StackPanel>
        </ScrollViewer>

    </Grid>
</Window>
